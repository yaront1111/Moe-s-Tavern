{
  "id": "task-reconnect",
  "epicId": "epic-notifications",
  "title": "Auto-reconnect on daemon disconnect",
  "description": "Automatically retry WebSocket connection if daemon disconnects.",
  "definitionOfDone": [
    "On disconnect, retry every 5 seconds up to 10 times",
    "Show \"Reconnecting...\" in status bar during retry",
    "Stop retry if user manually disconnects",
    "Resume retry if daemon comes back online"
  ],
  "taskRails": [
    "Use ScheduledExecutorService for retry timer",
    "Track manual disconnect vs unexpected disconnect"
  ],
  "implementationPlan": [
    {
      "stepId": "step-1",
      "description": "Add reconnectAttempts counter and isReconnecting state to MoeProjectService.kt. Use ScheduledExecutorService for retry timer.",
      "status": "COMPLETED",
      "affectedFiles": [
        "moe-jetbrains/src/main/kotlin/com/moe/services/MoeProjectService.kt"
      ],
      "startedAt": "2026-02-05T12:59:58.291Z",
      "completedAt": "2026-02-05T13:00:45.061Z"
    },
    {
      "stepId": "step-2",
      "description": "Create ScheduledExecutorService for 5-second retry scheduling. Track manual disconnect vs unexpected disconnect.",
      "status": "COMPLETED",
      "affectedFiles": [
        "moe-jetbrains/src/main/kotlin/com/moe/services/MoeProjectService.kt"
      ],
      "startedAt": "2026-02-05T13:00:50.447Z",
      "completedAt": "2026-02-05T13:00:50.609Z"
    },
    {
      "stepId": "step-3",
      "description": "Implement reconnect loop in WebSocket onClose handler (retry if not manual and attempts < 10). Status bar widgets must implement StatusBarWidget.",
      "status": "COMPLETED",
      "affectedFiles": [
        "moe-jetbrains/src/main/kotlin/com/moe/services/MoeProjectService.kt"
      ],
      "startedAt": "2026-02-05T13:00:57.335Z",
      "completedAt": "2026-02-05T13:00:57.497Z"
    },
    {
      "stepId": "step-4",
      "description": "Emit connection state changes for status bar. Use project-level message bus for state subscriptions. Register NotificationGroup in plugin.xml.",
      "status": "COMPLETED",
      "affectedFiles": [
        "moe-jetbrains/src/main/kotlin/com/moe/services/MoeProjectService.kt",
        "moe-jetbrains/src/main/kotlin/com/moe/statusbar/MoeStatusBarWidget.kt"
      ],
      "startedAt": "2026-02-05T13:01:03.440Z",
      "completedAt": "2026-02-05T13:01:03.608Z"
    }
  ],
  "status": "ARCHIVED",
  "assignedWorkerId": null,
  "branch": null,
  "prLink": null,
  "reopenCount": 1,
  "reopenReason": "QA FAIL: Not implemented. All 5 implementation steps are PENDING. Need to add reconnection logic to MoeProjectService with: ScheduledExecutorService for retry, reconnectAttempts counter, isManualDisconnect flag, and status bar integration showing 'Reconnecting...'.",
  "createdBy": "HUMAN",
  "parentTaskId": null,
  "order": 18,
  "createdAt": "2026-02-03T12:30:00.000Z",
  "updatedAt": "2026-02-08T23:39:36.726Z",
  "priority": "MEDIUM",
  "comments": []
}