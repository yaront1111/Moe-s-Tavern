<idea-plugin>
    <id>com.moe.jetbrains</id>
    <name>Moe - AI Workforce Command Center</name>
    <vendor email="yaront111@gmail.com" url="https://github.com/yaront1111/Moe-s-Tavern">yaront1111</vendor>
    <resource-bundle>messages.MoeBundle</resource-bundle>

    <description><![CDATA[
        <p><b>Moe - AI Workforce Command Center</b></p>
        <p>Visual Kanban board for orchestrating AI coding agents with human oversight.</p>

        <h3>Features</h3>
        <ul>
            <li><b>Kanban Board</b> - 6-column task board (Backlog, Planning, Approval, Working, Review, Done)</li>
            <li><b>Plan Approval</b> - Review and approve AI implementation plans before execution</li>
            <li><b>Multi-Agent Support</b> - Run architect, worker, and QA agents simultaneously</li>
            <li><b>Real-time Sync</b> - Live updates via WebSocket connection to daemon</li>
            <li><b>Drag & Drop</b> - Change task status by dragging between columns</li>
            <li><b>Rails System</b> - Define constraints that AI agents must follow</li>
        </ul>

        <h3>How It Works</h3>
        <ol>
            <li>Create epics and tasks in the board</li>
            <li>AI agents claim tasks and submit implementation plans</li>
            <li>You review and approve/reject plans</li>
            <li>Agents execute approved plans step-by-step</li>
            <li>QA reviews completed work</li>
        </ol>

        <h3>Compatible With</h3>
        <ul>
            <li>Claude Code (via MCP protocol)</li>
            <li>Any MCP-compatible AI agent</li>
        </ul>

        <p>Works on Windows, Mac, and Linux.</p>

        <p><a href="https://github.com/yaront1111/Moe-s-Tavern">Documentation & Source Code</a></p>
    ]]></description>

    <change-notes><![CDATA[
        <h3>0.1.0</h3>
        <ul>
            <li>Initial release</li>
            <li>Kanban board with 6 status columns</li>
            <li>Task detail dialog with approve/reject/reopen</li>
            <li>Epic and task creation</li>
            <li>Drag-and-drop status changes</li>
            <li>WebSocket connection to moe-daemon</li>
            <li>Status bar connection indicator</li>
            <li>Auto-start daemon on project open</li>
            <li>Keyboard shortcuts for common actions</li>
        </ul>
    ]]></change-notes>

    <depends>com.intellij.modules.platform</depends>
    <depends optional="true">org.jetbrains.plugins.terminal</depends>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceImplementation="com.moe.services.MoeProjectService"/>

        <toolWindow
            id="Moe"
            anchor="right"
            factoryClass="com.moe.toolwindow.MoeToolWindowFactory"/>

        <notificationGroup id="Moe Notifications"
                           displayType="BALLOON"
                           key="notification.group.moe"/>

        <statusBarWidgetFactory id="MoeStatusBarWidget"
                                implementation="com.moe.statusbar.MoeStatusBarWidgetFactory"
                                order="after Position"/>
    </extensions>

    <projectListeners>
        <listener class="com.moe.listeners.MoeProjectOpenListener"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </projectListeners>

    <actions>
        <group id="Moe.MainMenu" text="Moe" popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <action id="Moe.Init"
                    class="com.moe.actions.InitMoeAction"
                    text="Initialize Moe"
                    description="Create .moe in a folder"/>
            <separator/>
            <action id="Moe.OpenBoard"
                    class="com.moe.actions.OpenBoardAction"
                    text="Open Board"
                    description="Open Moe task board">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt M"/>
            </action>
            <action id="Moe.ApproveTask"
                    class="com.moe.actions.ApproveTaskAction"
                    text="Approve Task"
                    description="Approve current task awaiting approval">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt A"/>
            </action>
            <action id="Moe.RejectTask"
                    class="com.moe.actions.RejectTaskAction"
                    text="Reject Task"
                    description="Reject current task with reason">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt R"/>
            </action>
            <action id="Moe.CreateTask"
                    class="com.moe.actions.CreateTaskAction"
                    text="Create Task"
                    description="Create a new task">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt N"/>
            </action>
            <separator/>
            <action id="Moe.StartAllAgents"
                    class="com.moe.actions.StartAllAgentsAction"
                    text="Start All Agents"
                    description="Launch architect, worker, and QA agents"/>
            <action id="Moe.StartArchitect"
                    class="com.moe.actions.StartArchitectAction"
                    text="Start Architect"
                    description="Launch architect agent"/>
            <action id="Moe.StartWorker"
                    class="com.moe.actions.StartWorkerAction"
                    text="Start Worker"
                    description="Launch worker agent"/>
            <action id="Moe.StartQA"
                    class="com.moe.actions.StartQAAction"
                    text="Start QA"
                    description="Launch QA agent"/>
        </group>
    </actions>
</idea-plugin>
